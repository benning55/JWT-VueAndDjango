{"remainingRequest":"/home/benntend/Desktop/testlogin/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/benntend/Desktop/testlogin/frontend/src/components/Auth.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/benntend/Desktop/testlogin/frontend/src/components/Auth.vue","mtime":1571644959471},{"path":"/home/benntend/Desktop/testlogin/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/benntend/Desktop/testlogin/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/benntend/Desktop/testlogin/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/benntend/Desktop/testlogin/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgICAgIHBhc3N3b3JkOiAnJwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgYXV0aGVudGljYXRlKCkgewogICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZAogICAgICAgICAgICB9OwogICAgICAgICAgICBheGlvcy5wb3N0KHRoaXMuJHN0b3JlLnN0YXRlLmVuZHBvaW50cy5vYnRhaW5KV1QsIHBheWxvYWQpCiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZVRva2VuJywgcmVzcG9uc2UuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGFuZCBzZXQgYXV0aCB1c2VyCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVVSTDogdGhpcy4kc3RvcmUuc3RhdGUuZW5kcG9pbnRzLmJhc2VVckwsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB5b3VyIEF1dGhvcml6YXRpb24gdG8gJ0pXVCcsIG5vdCBCZWFyZXIhISEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBKV1QgJHt0aGlzLiRzdG9yZS5zdGF0ZS5qd3R9YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgeGhyRmllbGRzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggdGhlIGF1dGhlbnRpY2F0aW9uIHJldHVybmVkIGEgdXNlciBvYmplY3QgdGhhdCBjYW4gYmUKICAgICAgICAgICAgICAgICAgICAvLyBkZWNvZGVkLCB3ZSBmZXRjaCBpdCBhZ2Fpbi4gVGhpcyB3YXkgd2UgYXJlbid0IHN1cGVyIGRlcGVuZGFudCBvbgogICAgICAgICAgICAgICAgICAgIC8vIEpXVCBhbmQgY2FuIHBsdWcgaW4gc29tZXRoaW5nIGVsc2UuCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXhpb3NJbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZShiYXNlKTsKICAgICAgICAgICAgICAgICAgICBheGlvc0luc3RhbmNlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAiL3VzZXIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7fQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRBdXRoVXNlciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2F1dGhVc2VyOiByZXNwb25zZS5kYXRhLCBpc0F1dGhlbnRpY2F0ZWQ6IHRydWV9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9tb3ZpZXMiKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGlyKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICBhbGVydCgnRnVjayBZb3UnKQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["Auth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Auth.vue","sourceRoot":"src/components","sourcesContent":["<template lang=\"html\">\n    <div class=\"auth container\">\n        <form>\n            <h1>Log In</h1>\n            <div class=\"form-group\">\n                <label for=\"exampleInputEmail1\">Username</label>\n                <input type=\"text\" v-model=\"username\" class=\"form-control\" id=\"exampleInputEmail1\"\n                       aria-describedby=\"emailHelp\"\n                       placeholder=\"Enter Username\">\n                <small id=\"emailHelp\" class=\"form-text text-muted\">We'll never share your Username with anyone\n                    else.</small>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"exampleInputPassword1\">Password</label>\n                <input type=\"password\" v-model=\"password\" class=\"form-control\" id=\"exampleInputPassword1\"\n                       placeholder=\"Password\">\n            </div>\n            <router-link to=\"/register\"><small>Don't have an account?</small></router-link>\n            <br><br>\n            <button type=\"submit\" class=\"btn btn-primary\" @click.prevent=\"authenticate\">Submit</button>\n        </form>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios'\n    export default {\n        data() {\n            return {\n                username: '',\n                password: ''\n            }\n        },\n        methods: {\n            authenticate() {\n                const payload = {\n                    username: this.username,\n                    password: this.password\n                };\n                axios.post(this.$store.state.endpoints.obtainJWT, payload)\n                    .then((response) => {\n                        this.$store.commit('updateToken', response.data.token);\n                        // get and set auth user\n                        const base = {\n                            baseURL: this.$store.state.endpoints.baseUrL,\n                            headers: {\n                                // Set your Authorization to 'JWT', not Bearer!!!\n                                Authorization: `JWT ${this.$store.state.jwt}`,\n                                'Content-Type': 'application/json'\n                            },\n                            xhrFields: {\n                                withCredentials: true\n                            }\n                        };\n                        // Even though the authentication returned a user object that can be\n                        // decoded, we fetch it again. This way we aren't super dependant on\n                        // JWT and can plug in something else.\n                        const axiosInstance = axios.create(base);\n                        axiosInstance({\n                            url: \"/user/\",\n                            method: \"get\",\n                            params: {}\n                        })\n                            .then((response) => {\n                                this.$store.commit(\"setAuthUser\",\n                                    {authUser: response.data, isAuthenticated: true}\n                                );\n                                this.$router.push(\"/movies\")\n                            });\n                    })\n                    .catch((error) => {\n                        console.log(error);\n                        console.debug(error);\n                        console.dir(error);\n                        alert('Fuck You')\n                    })\n            }\n        }\n    }\n</script>\n\n<style lang=\"css\">\n</style>"]}]}